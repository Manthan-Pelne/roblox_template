<section class="flex flex-row justify-between">
    <div class="max-w-6xl mx-auto md:mx-0 templates-center gap-8 p-5 dark:text-white flex flex-col md:flex-row justify-center md:justify-between">
      <div class="w-[300px] h-[300px] p-1 bg-gray-50 dark:bg-[#110e0c] rounded-xl border border-black/10 m-auto">
        <img id="mainImage" class="w-full h-full" src="{{imgUrl}}/{{template.image.key}}" alt="{{template.name}}">
        <div id="zoomLens" class="hidden absolute w-28 h-28 border-2 border-[#E45137] rounded-full pointer-events-none"></div>
      </div>
      <div class="border border-black/5 dark:border-white/5 h-0 md:h-[300px]"></div>
      <div>
        <h1 class="text-3xl font-semibold">{{template.name.charAt(0).toUpperCase() + template.name.slice(1)}}</h1>
        <p class="text-black/60 mt-2 dark:text-white/70">{{template.category.icon}} {{template.category.title.charAt(0).toUpperCase() + template.category.title.slice(1)}}</p>
        <hr class="my-4 border border-black/10 dark:border-white/10">
        <div class="flex templates-center gap-3">
          <p class="text-black/80 dark:text-white tracking-wide"><span class="text-rose-500 font-semibold">CODE</span> <span id="templateCode">{{template.code}}</span></p>
          <button onclick="copyBoard()" class="ml-4 px-2 py-1 flex templates-center justify-center gap-1 text-sm cursor-pointer border border-rose-600  dark:border-[#ffbdb1] text-black/70 dark:bg-600/50 dark:hover:bg-[#552a14] dark:text-white rounded-md hover:bg-[#ffefec] transition duration-300"> Copy <svg class="w-5 h-5 hidden tick-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M2.5 13.833L6 17.5l1.024-1.073M16.5 6.5l-6.063 6.352m-2.937.981L11 17.5l10.5-11"/></svg> </button>
        </div>
        <hr class="my-4 border border-black/10 dark:border-white/10">
        <p class="text-sm text-black/60 dark:text-white/70">Use this template by downloading it for free</p>
        <a href="/download/{{template._id}}/{{template.image.key}}" class="mt-3 inline-block px-4 py-2 bg-rose-500 text-white rounded-lg hover:bg-rose-600 transition"> Download Template </a>
        <div class="flex items-center space-x-5 mt-5 text-zinc-700"> 
          <div class="flex items-center space-x-1"> <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21.544 11.045c.304.426.456.64.456.955c0 .316-.152.529-.456.955C20.178 14.871 16.689 19 12 19c-4.69 0-8.178-4.13-9.544-6.045C2.152 12.529 2 12.315 2 12c0-.316.152-.529.456-.955C3.822 9.129 7.311 5 12 5c4.69 0 8.178 4.13 9.544 6.045Z"/><path d="M15 12a3 3 0 1 0-6 0a3 3 0 0 0 6 0Z"/></g></svg></span>  <span>{{template.viewcount}}</span> </div>
          <div class="flex items-center space-x-1"> <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="m12 16l-5-5l1.4-1.45l2.6 2.6V4h2v8.15l2.6-2.6L17 11zm-8 4v-5h2v3h12v-3h2v5z"/></svg></span>  <span>{{template.downloadcount}}</span> </div>
        </div>
      </div>
    </div>

   <!-- Zoomed Image Preview -->
    <div class="hidden md:block">
        <div id="zoomResult" class="hidden absolute right-0 w-[300px] h-full  bg-no-repeat bg-cover rounded-xl"></div>
    </div>
</section>

    <script>
      function copyBoard() {
        const templateCode = document.getElementById('templateCode').innerText;
        const copyBtn = event.currentTarget;
        const tickIcon = copyBtn.querySelector('.tick-icon');

        navigator.clipboard.writeText(templateCode).then(() => {
          tickIcon.classList.remove('hidden');

          setTimeout(() => {
            tickIcon.classList.add('hidden');

          }, 2000);
        }).catch(err => {
          console.error('Failed to copy: ', err);
        });
      }

    </script>

    <style>
      #zoomLens {
        background: rgba(255, 255, 255, 0.3);
        cursor: none;
      }
      #zoomResult {
        background-repeat: no-repeat;
        background-size: 800px 800px; /* Zoom level (increase for more zoom) */
      }
    </style>

    <script>
  const img = document.getElementById("mainImage");
  const lens = document.getElementById("zoomLens");
  const result = document.getElementById("zoomResult");

  img.addEventListener("mousemove", moveLens);
  img.addEventListener("mouseenter", () => {
    lens.classList.remove("hidden");
    result.classList.remove("hidden");
    result.style.backgroundImage = `url(${img.src})`;
  });
  img.addEventListener("mouseleave", () => {
    lens.classList.add("hidden");
    result.classList.add("hidden");
  });

  function moveLens(e) {
    const rect = img.getBoundingClientRect();
    const lensSize = lens.offsetWidth / 3;

    let x = e.clientX - rect.left;
    let y = e.clientY - rect.top;

    x = Math.max(lensSize, Math.min(x, rect.width - lensSize));
    y = Math.max(lensSize, Math.min(y, rect.height - lensSize));

    lens.style.left = (x - lensSize) + "px";
    lens.style.top = (y - lensSize) + "px";

    const zoomX = (x / rect.width) * 100;
    const zoomY = (y / rect.height) * 100;

    result.style.backgroundPosition = `${zoomX}% ${zoomY}%`;
  }
</script>

